!function(a){"use strict";var r={init:function(){r.maybeInjectSendLogButton()},maybeInjectSendLogButton:function(){var n=a("#log-viewer-select a.page-title-action");if(n.length){var t=n.attr("href");if(-1!==t.indexOf("handle=woongkir_")){var e=n.clone().attr("href",t.replace("handle=woongkir_","send_log=woongkir_")).html(woongkir_log_params.button_text+'<span class="spinner"></span>');e.on("click",function(n){if(n.preventDefault(),n.stopPropagation(),confirm(woongkir_log_params.confirm_text)){var t=_.extend({action:"woongkir_send_log"},r.parseParams(e.attr("href")));a.ajax({method:"POST",url:woongkir_log_params.ajax_url,data:t,beforeSend:function(){e.find(".spinner").css("visibility","visible")}}).done(function(n){if(n.data)return alert(n.data)}).fail(function(n,t,e){if(n.statusText)return alert(t.toUpperCase()+": "+n.statusText);alert(t.toUpperCase()+": "+e)}).always(function(){e.find(".spinner").css("visibility","hidden")})}}),n.after(e)}}},parseParams:function(n){for(var t,e=/([^&=]+)=?([^&]*)/g,a=/\+/g,r=function(n){return decodeURIComponent(n.replace(a," "))},i={};t=e.exec(n);){var o=r(t[1]),s=r(t[2]);o&&0!==o.indexOf("http")&&(i[o]=s)}return i}};a(document).ready(r.init)}(jQuery);